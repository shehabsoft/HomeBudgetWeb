<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	>
	<h:head>
			<link rel="stylesheet" type="text/css"
			href="../xmlhttp/css/rime/rime.css" />
			<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<link rel='stylesheet' type='text/css'
			href='../resources/css/showcase_style.css' />
			<link rel='stylesheet' type='text/css'
			href='../resources/css/table.css' />
			    <meta charset="utf-8" />
    <link rel="icon" type="image/png" href="assets/img/favicon.ico" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Home Budget by Shehab eldin tarek</title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />
    <!-- Bootstrap core CSS     -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
    <!-- Animation library for notifications   -->
    <link href="assets/css/animate.min.css" rel="stylesheet" />
    <!--  Light Bootstrap Table core CSS    -->
    <link href="assets/css/light-bootstrap-dashboard.css" rel="stylesheet" />
    <!--  CSS for Demo Purpose, don't include it in your project     -->
    <link href="assets/css/demo.css" rel="stylesheet" />

    <link href="assets/css/pe-icon-7-stroke.css" rel="stylesheet" />

<script src="assets/js/jquery-1.10.2.js" type="text/javascript"></script>
<script src="assets/js/bootstrap.min.js" type="text/javascript"></script>

 
    <script type="text/javascript">
	$(document).ready(function(){
		 document.getElementById("successMessage").style.display="none";
		 document.getElementById("errorMessage").style.display="none";
		 document.getElementById('error').style.display="none";
		 document.getElementById('errorMailMessage').style.display="none";
	});
</script>
    <script>
 

    function ckeck() {
    	$("#myModal").modal('show'); 
        var uname = document.getElementById("signUp:userName");
        document.getElementById('errorMessage').innerHTML="";
        var errorFlage=false;
        var error=0;
        if (""==uname.value||uname.value==" ")
        {
        document.getElementById('error').style.display="block";
       	document.getElementById('errorMessage').style.display="block";
		document.getElementById('errorMessage').innerHTML="You Should Enter English Name  Description ";
		errorFlage=true;
		error+=1;
        }
        var email = document.getElementById("signUp:Email");
        ValidateEmailPattern(email);
        if (""== email.value||" "== email.value)
        {
        document.getElementById('error').style.display="block";
       	document.getElementById('errorMessage').style.display="block";
        document.getElementById('errorMessage').innerHTML=document.getElementById('errorMessage').innerHTML+"<br/>"+"You Should Enter Email Address";
        errorFlage=true;
        error+=1;
        }
        var address = document.getElementById("signUp:address");
        if (" "==address.value||""==address.value)
        {
        	
        document.getElementById('error').style.display="block";
       	document.getElementById('errorMessage').style.display="block";
        document.getElementById('errorMessage').innerHTML=document.getElementById('errorMessage').innerHTML+"<br/>"+"You Should Enter  Address";
        errorFlage=true;
        error+=1;
        }
       
       errorFlage= validatePasswordMatch();
       if(errorFlage)
    	   {
    	   error+=1;
    	   }
       var mobilenumber= document.getElementById("signUp:mobilenumber");
     
       if ( mobilenumber.value == ""||mobilenumber.value==0)
       {
      	document.getElementById('error').style.display="block";
      	document.getElementById('errorMessage').style.display="block";
       	document.getElementById('errorMessage').innerHTML=document.getElementById('errorMessage').innerHTML+"<br/>You Should Enter Mobile Number ";
       	errorFlage=true;
       	error+=1;
       }
       errorFlage=validateNumber(mobilenumber,'mobileMessage')
        if(errorFlage)
    	   {
    	   error+=1;
    	   }
       if(error>0)
        {
          document.getElementById('error').style.display="block";
          document.getElementById('errorMessage').style.display="block";
          return false;
        }else
        {    
        	  document.getElementById('error').style.display="none";
            document.getElementById('errorMessage').style.display="none";  
        	return true;
        }
        
       
    }
    function validateEnglishName(englishValue,ID)
	{
		var text=englishValue.value;
	    var arregex =/^[-_ a-zA-Z0-9]+$/;
	   if(arregex.test(text))
		   {
		   	 document.getElementById(ID).innerHTML="";
		     return true;
		   }else
			{
			 document.getElementById('error').style.display="block";
			 document.getElementById(ID).innerHTML="You Should Enter English Name  Description ";
			 document.getElementById('errorMessage').innerHTML=document.getElementById('errorMessage').innerHTML+"<br/>"+"Invalid Email Pattern...";
			 return false;
			 }
	}
    function ValidateEmailPattern(email)
    {       
		var text=email.value;
		var arregex = /\S+@\S+\.\S+/;
			if(arregex.test(text))
				{
				document.getElementById('emailMessage').style.color="green";
				 document.getElementById('emailMessage').innerHTML="Valid Email";
				 return true;
				}else
				{
				document.getElementById('emailMessage').innerHTML="You Should Enter Valid Email  ";
				return false;
				}
   }
   

function validateNumber(number,ID)
{
	var numberValue=number.value;
	var arregex =/^(\+91-|\+91|0)?\d{10}$/;
	if(arregex.test(numberValue))
	   {
		 document.getElementById(ID).innerHTML="";
		 return false;
	   }else
		   {
		 document.getElementById(ID).innerHTML="Invalid Mobile Number Pattern ";
		 document.getElementById('error').style.display="block";
		 document.getElementById('errorMessage').innerHTML=document.getElementById('errorMessage').innerHTML+"<br/>"+"Invalid Mobile Number Pattern";
		 return true;
		   }
	
}
function validate(data,status)
{
		 switch(data.status) {
         case "begin":
        	 $("#myModal").modal('show'); 
             break;
         case "complete":
             break;
         case "success":
        	 if("block"==document.getElementById("errorMessage").style.display)//server Error
        		 {
        		 setTimeout(FailReg, 5000);
        		 }else
        			{
		        	document.getElementById("successMessage").style.display="block";
		        	setTimeout(SuccessReg, 3000);
        			}
        	 break;
         case "serverError":
        	 document.getElementById("successMessage").style.display="none";
        	 document.getElementById("errorMessage").style.display="block";
        	 showError(data.errorMessage);
        	 break;
		 }
}

 function closeWaiting()
 {
	 $("#ckeckMail").modal('hide');
	 document.getElementById('errorMessage').innerHTML="";
 }

 function SuccessReg() {
	 document.getElementById("successMessage").style.display="none";
	 document.getElementById("errorMessage").style.display="none";
	 $("#myModal").modal('hide');
	 document.getElementById('errorMessage').innerHTML="";
	 window.location.href = 'http://localhost:8080/HomeBudgetWeb/web/Dashboard.jsf';
 }
 function FailReg() {
	 document.getElementById("successMessage").style.display="none";
	 document.getElementById("errorMessage").style.display="none";
	 $("#myModal").modal('hide');
	 document.getElementById('errorMessage').innerHTML="";
 }
 function showError(error)
 {
	 
	var message= error.substring(23);
	 document.getElementById("successMessage").style.display="none";
	 document.getElementById('errorMessage').innerHTML=""+message;
	 setTimeout(FailReg, 5000);
 }
    
    </script>
  
    
	</h:head>
	
	
	<h:body>
			<div class="wrapper">
			 <div class="content">
            <div class="container-fluid">
				<form class="form-horizontal">
			<fieldset>
			
			<!-- Form Name -->
			<legend>Sign Up In Smart Home Budget</legend>
		   <h:form id="signUp"  onsubmit="return ckeck()" >
			<!-- Text input-->
			<div class="form-group">
			  <label class="col-md-4 control-label" for="Name">Name</label>  
			  <div class="col-md-5">
			  <h:inputText id="userName" name="Name" type="text" onblur="validateEnglishName(this,'englishMessage')" class="form-control input-md"  requiredMessage="dsfdffdgdfg"   required="true"  value="#{userView.userVO.name}"></h:inputText>
			    <div class="col-md-8" id="englishMessage"  style="color:red" >
			    
			    <i  class="fa fa-times text-danger"/> </div> 
			     
			  </div>
			</div>
			<div class="form-group">
			  <label class="col-md-4 control-label" for="Name">Email</label>  
			  <div class="col-md-4">
			  
			  <h:inputText id="Email" name="Email" type="text" onblur="ValidateEmailPattern(this)"    class="form-control input-md" required="true"  value="#{userView.userVO.email}"></h:inputText>
			    <div class="col-md-8" id="emailMessage"  style="color:red" ><i  class="fa fa-times text-danger"/></div> 
			    </div>
			    <div class="col-md-3">     
			     <h:panelGroup id="emailMessage" class="col-md-7" >
		 			<h:outputFormat style="color:red" value="#{userView.emailExitMessage}"></h:outputFormat>	
		 			</h:panelGroup>		
				<h:commandButton value="Check Mail"  type="submit"  class="btn btn-info btn-fill pull-right" actionListener="#{userView.checkEmail}" onclick=""
																							style="width:150px"  > 
					<f:ajax event="action" execute="Email" render="emailMessage" onclick=""
		 				 onevent="function(data) {validateEmail(data,'success')}" onerror="function(data) {  validateEmail(data,'failure')}" /> 
		 		 </h:commandButton> 
		 			
			  </div>
			</div>
			<!-- Password input-->
			<div class="form-group">
			  <label class="col-md-4 control-label" for="passwordinput">Password</label>
			  <div class="col-md-5">
			    <h:inputSecret id="passwordinput"  required="true " name="passwordinput" type="password" placeholder="" class="form-control input-md" value="#{userView.userVO.password}" />
			    <span class="help-block">max 16 characters</span>
			  </div>
			</div>
			
			<!-- Password input-->
			<div class="form-group">
			  <label class="col-md-4 control-label" for="confirm_password">Confirm Password</label>
			  <div class="col-md-5">
			    <h:inputSecret id="confirm_password" name="confirm_password" required="true" onblur="validatePasswordMatch()"  type="password" placeholder="Re-type password" class="form-control input-md" value="#{userView.userVO.rePassword}"/>
			     <div class="col-md-8" id="passwordMessage"  style="color:red" ><i  class="fa fa-times text-danger"/></div> 
			  </div>
			</div>
			
			<!-- Multiple Radios (inline) -->
			<div class="form-group">
			  <label class="col-md-4 control-label" for="genderId">Gender</label>
			  <div class="col-md-5"> 
			    
			      <h:selectOneRadio type="radio" name="gender"  required="true"  id="genderId" value="#{userView.userVO.genderId}" >
			      
			         	<f:selectItem itemValue="1" itemLabel="Male" />
				   	    <f:selectItem itemValue="2" itemLabel="Female" />
				   
   				</h:selectOneRadio>
			   
			   
			  </div>
			  
			</div>
				<div class="form-group">
			  <label class="col-md-4 control-label" for="status">Status</label>
			  <div class="col-md-5"> 
			    
			      <h:selectOneRadio type="radio" name="status"   required="true" id="status" value="#{userView.userVO.statusId}" >
			      
			         	<f:selectItem itemValue="1" itemLabel="Single" />
				   	    <f:selectItem itemValue="2" itemLabel="Married" />
				   
   				</h:selectOneRadio>
			   
			   
			  </div>
			</div>
			
			<!-- Textarea -->
			<div class="form-group">
			  <label class="col-md-4 control-label" for="address">Address</label>
			  <div class="col-md-4">                     
			<div class="col-md-10">
               <h:inputText type="text" class="form-control" required="true" onblur="validateEnglishName(this,'addressMessage')" id="address" value="#{userView.userVO.address}"/>
             <div class="col-md-8" id="addressMessage"  style="color:red" ><i  class="fa fa-times text-danger"/></div> 
      </div>
			  </div>
			</div>
		
			<!-- Select Basic -->
			<div class="form-group">
			  <label class="col-md-4 control-label" for="country">Country</label>
			  <div class="col-md-5">
			    <h:selectOneMenu id="countryId" class="form-control" value="#{userView.userVO.countryId}">
   														<f:selectItems value="#{userView.countryList}" var="n" 
   														
   														itemLabel="#{n.englishName}" itemValue="#{n.id}"
   														/>
   				</h:selectOneMenu>
			  </div>
			</div>
			
			<!-- Text input-->
			<div class="form-group">
			  <label class="col-md-4 control-label" for="mobilenumber">Mobile Number</label>  
			  <div class="col-md-5">
			  <h:inputText id="mobilenumber" name="mobilenumber"   onblur="validateNumber(this,'mobileMessage')"  required="true" type="text" placeholder="Mobile Number" class="form-control input-md" value="#{userView.userVO.mobile_number}"/>
			     <div class="col-md-8" id="mobileMessage"  style="color:red" ><i  class="fa fa-times text-danger"/></div> 
			  </div>
			</div>
				<div class="form-group">
			  <label class="col-md-4 control-label" for="mobilenumber">Prefered Currency ($)</label>  
			  <div class="col-md-5">
			 <label ></label>
                                                	<h:selectOneMenu  value="#{userView.userVO.currencyId}" class="form-control col-md-9" id="currencyId" required="true">
											   			<f:selectItems value="#{userView.currencyList}"  var="n"
   															itemLabel="#{n.name}" itemValue="#{n.id}"/>
											   		</h:selectOneMenu>
			  </div>
			</div>
		
		
			
			<!-- Prepended checkbox -->
			<div class="col-md-5">
                                            <div class="form-group">
                                            
												<h:commandButton value="Sign Up"  type="submit"  class="btn btn-info btn-fill pull-right" actionListener="#{userView.add}"   onclick="return ckeck()"
																							style="width:150px;"  > 
																  
												                    <f:ajax event="action" execute="currencyId mobilenumber countryId address status genderId passwordinput Email userName" render="currencyId mobilenumber countryId address status genderId passwordinput Email userName"  
		 										                            onevent="function(data) {  validate(data,'success')}" onerror="function(data) {  validate(data,'failure')}" /> 
		 										  </h:commandButton> 
		 								
		 										  </div>
		 										  
		  </div>
<div id="myModal" class="modal fade " >
    <div class="modal-dialog ">
        <div class="modal-content alert alert-info alert-with-icon">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title">Waiting.....</h4>
            </div>
            <div class="modal-body">
                <div id="wait" style=""><img src='assets/img/3.gif'  /><img src='assets/img/3.gif'  /><img src='assets/img/3.gif'  /><img src='assets/img/3.gif'  /><img src='assets/img/3.gif'  /></div>
                <div class="alert alert-success" id="successMessage" style="display:none">
                
                
                  <span><b> Success - </b> Registeration Done Successfully "</span>
                    </div>
                    	 <div id="error" style="display:none" >Please Solve Errors Before Submit</div>	
                    	    <div class="alert alert-danger" id="errorMessage" style="display:none">
                                    <button type="button" aria-hidden="true" class="close">×</button>
                                   
                                </div>
                    
            </div>
        </div>
    </div>
</div>
<div id="ckeckMail" class="modal fade " >
    <div class="modal-dialog ">
        <div class="modal-content alert alert-info alert-with-icon">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title">Waiting.....</h4>
            </div>
            <div class="modal-body">
         
    
      
				<p>You Can Wait..............</p>
                <div id="wait" style=""><img src='assets/img/3.gif'  /><img src='assets/img/3.gif'  /><img src='assets/img/3.gif'  /><img src='assets/img/3.gif'  /><img src='assets/img/3.gif'  /></div>
           <div class="alert alert-danger" id="errorMailMessage">
                                   
                                   
                                </div>
            </div>
        </div>
    </div>
</div>
			</h:form>
			</fieldset>
			</form>
			</div>
			</div>
			</div>
			</h:body>
</html>